"use strict";var WorkerThread=function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){e:if("object"==typeof e&&null!==e){var t=e[Symbol.toPrimitive];if(void 0!==t){if("object"!=typeof(e=t.call(e,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}e=String(e)}return"symbol"==typeof e?e:String(e)}function c(e){return p.has(e)?p.get(e):(p.set(e,m),v.push(e),m++)}function u(e,t){0<b&&e[58]&&(g=!0,E=E.concat(t),Promise.resolve().then((function(t){if(g){t=new Uint16Array(function(){var e=h;return h=[],e}().reduce((function(e,t){return e.concat(t[8])}),[])).buffer;var n=new Uint16Array(E).buffer;e.postMessage(i(i(i(i(i({},54,b),12,2===b?3:2),37,t),41,function(){var e=v;return v=[],e}()),36,n),[t,n]),E=[],g=!1,b=2}})))}function s(e,t,n){n=Object.assign(Object.create(null),n);var r=Object.defineProperty;return r(n,"length",{get:function(){return Object.keys(this).length}}),r(n,"key",{value:function(e){var t=Object.keys(this);return 0<=e&&e<t.length?t[e]:null}}),r(n,"getItem",{value:function(e){return(e=this[e])?e:null}}),r(n,"setItem",{value:function(n,r){r=String(r),this[n]=r,u(e,[12,2,t,c(n)+1,c(r)+1])}}),r(n,"removeItem",{value:function(n){delete this[n],u(e,[12,2,t,c(n)+1,0])}}),r(n,"clear",{value:function(){var n=this;Object.keys(this).forEach((function(e){delete n[e]})),u(e,[12,2,t,0,0])}}),n}var f,l,d,y,m=0,v=[],p=new Map,b=0,h=[],g=!1,E=[],w=function(){function e(t){n(this,e),this.document=t}return o(e,[{key:"getState",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(n){e.document.addGlobalEventListener("message",(function r(o){11===(o=o.data)[12]&&o[74]===t&&(e.document.removeGlobalEventListener("message",r),n(o[21]))})),u(e.document,[12,1,2,c(t)+1,0]),setTimeout(n,500,null)}))}},{key:"setState",value:function(e){try{var t=JSON.stringify(e)}catch(e){throw Error("AMP.setState only accepts valid JSON as input.")}u(this.document,[12,2,2,0,c(t)+1])}}]),e}(),S={},O=function(){function e(){n(this,e),this.removeGlobalEventListener=this.addGlobalEventListener=this.postMessage=this.defaultView=void 0,this[58]=!0,this[7]=-1,this.defaultView={document:this}}return o(e,[{key:"59",value:function(){b=2}}]),e}(),A={Array:!0,ArrayBuffer:!0,BigInt:!0,BigInt64Array:!0,BigUint64Array:!0,Boolean:!0,Cache:!0,CustomEvent:!0,DataView:!0,Date:!0,Error:!0,EvalError:!0,Event:!0,EventTarget:!0,Float32Array:!0,Float64Array:!0,Function:!0,Infinity:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Intl:!0,JSON:!0,Map:!0,Math:!0,NaN:!0,Number:!0,Object:!0,Promise:!0,Proxy:!0,RangeError:!0,ReferenceError:!0,Reflect:!0,RegExp:!0,Set:!0,String:!0,Symbol:!0,SyntaxError:!0,TextDecoder:!0,TextEncoder:!0,TypeError:!0,URIError:!0,URL:!0,Uint16Array:!0,Uint32Array:!0,Uint8Array:!0,Uint8ClampedArray:!0,WeakMap:!0,WeakSet:!0,WebAssembly:!0,WebSocket:!0,XMLHttpRequest:!0,atob:!0,addEventListener:!0,removeEventListener:!0,btoa:!0,caches:!0,clearInterval:!0,clearTimeout:!0,console:!0,decodeURI:!0,decodeURIComponent:!0,document:!0,encodeURI:!0,encodeURIComponent:!0,escape:!0,fetch:!0,indexedDB:!0,isFinite:!0,isNaN:!0,location:!0,navigator:!0,onerror:!0,onrejectionhandled:!0,onunhandledrejection:!0,parseFloat:!0,parseInt:!0,performance:!0,requestAnimationFrame:!0,cancelAnimationFrame:!0,self:!0,setTimeout:!0,setInterval:!0,unescape:!0},k=function(){},I=(f=postMessage.bind(self)||k,l=addEventListener.bind(self)||k,d=removeEventListener.bind(self)||k,(y=new O).postMessage=f,y.addGlobalEventListener=l,y.removeGlobalEventListener=d,y.defaultView);return function(e){var t=e;for(e=function(){Object.getOwnPropertyNames(t).forEach((function(e){var n=t;if(!A.hasOwnProperty(e))try{delete n[e]}catch(e){}})),t=Object.getPrototypeOf(t)};t&&t.constructor!==EventTarget;)e()}(self),self.AMP=new w(I.document),self.exportFunction=function(e,n){if(!e||""===e)throw Error("[worker-dom]: Attempt to export function was missing an identifier.");if("function"!=typeof n)throw Error('[worker-dom]: Attempt to export non-function failed: ("'.concat(e,'", ').concat(t(n),")."));if(e in S)throw Error('[worker-dom]: Attempt to re-export function failed: "'.concat(e,'".'));S[e]=n},addEventListener("message",(function(e){return function(e,t){if(12===(e=e.data)[12]){var n=e[77],r=JSON.parse(e[78]),o=e[7];(e=S[n])?Promise.resolve(e).then((function(e){return e.apply(null,r)})).then((function(e){u(t,[13,1,o,c(JSON.stringify(e))])}),(function(e){e=JSON.stringify(e.message||e),u(t,[13,2,o,c(JSON.stringify('[worker-dom]: Function "'.concat(n,'" threw: "').concat(e,'"')))])})):u(t,[13,2,o,c(JSON.stringify('[worker-dom]: Exported function "'.concat(n,'" could not be found.')))])}}(e,I.document)})),e.hydrate=function(e,t,n,r,o,i,a,c){t=e.defaultView,a.storage&&(t.localStorage=s(e,0,a.storage)),c.storage&&(t.sessionStorage=s(e,1,c.storage))},e.workerDOM=I,e}({});
//# sourceMappingURL=worker.nodom.js.map
